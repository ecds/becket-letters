{"ast":null,"code":"var _jsxFileName = \"/Users/mtherri/Documents/Code/beckett-letters/src/components/PersonDetails.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport DocMetaBuilder from './utilities/DocMetaBuilder';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport SearchRecipientOnPage from './utilities/SearchRecipientOnPage';\nimport MentionedLetters from './utilities/MentionedLettersTable';\n\nclass PersonDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getData = () => {\n      axios.all([axios.get(this.props.apiUrl + '/entities/' + this.props.match.params.id)]).then(axios.spread(getEntityData => {\n        const entityData = getEntityData.data.data;\n        console.log(entityData);\n        const lettersList = getEntityData.data.data.attributes['public-letters-hash'];\n        this.getReceivedLetters(getEntityData.data.data.attributes.label);\n        this.setState({\n          entityData,\n          lettersList\n        });\n        this.setState({\n          isLoaded: true\n        });\n      })).catch(err => {\n        this.setState({\n          isLoaded: false\n        });\n        this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    this.getReceivedLetters = name => {\n      if (name !== \" \") {\n        axios.all([axios.get(this.props.apiUrl + '/letters?recipients=' + name)]).then(axios.spread(getReceivedLetters => {\n          const receivedLetters = getReceivedLetters.data.data;\n          this.setState({\n            receivedLetters\n          });\n          this.setState({\n            isLoaded: true\n          });\n        })).catch(err => {\n          this.setState({\n            isLoaded: false\n          });\n          this.setState({\n            error: err.message\n          });\n        });\n      }\n    };\n\n    this.state = {\n      isLoaded: false,\n      error: '',\n      entityData: [],\n      receivedLetters: [],\n      lettersList: []\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  componentDidUpdate() {\n    console.log(this.state.entityData.attributes.properties.media.images);\n  }\n\n  render() {\n    const ReceivedLettersList = this.state.receivedLetters.map((letter, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, letter.attributes['formatted-date']), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: '/letters/letterdetails/' + letter.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"Explore Letter\"))));\n    const {\n      error,\n      isLoaded\n    } = this.state; // if there is an error\n\n    if (error) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 14\n        }\n      }, \"Error: \", error.message); // if not loaded show loading\n    } else if (!isLoaded) {\n      return /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 14\n        }\n      }, \"Loading...\"); // return now that component has value\n    } else {\n      const metaBuild = {\n        title: this.state.entityData.attributes.label,\n        description: `View details for ${this.state.entityData.attributes.label}`,\n        id: this.state.entityData.id\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"details\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DocMetaBuilder, Object.assign({}, metaBuild, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.entityData.attributes.properties ? this.state.entityData.attributes.properties['last-name'] : null\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.entityData.attributes.properties ? this.state.entityData.attributes.properties['first-name'] : null\n        },\n        className: this.state.entityData.attributes.properties['first-name'] ? 'comma' : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }), this.state.entityData.attributes.properties && this.state.entityData.attributes.properties['alternate-names-spellings'].length > 0 ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"spellings\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 147\n        }\n      }, this.state.entityData.attributes.properties['alternate-names-spellings'].map((entity, key) => /*#__PURE__*/React.createElement(\"span\", {\n        key: key,\n        dangerouslySetInnerHTML: {\n          __html: entity\n        },\n        className: \"list-span\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 270\n        }\n      })), \" \") : null, this.state.entityData.attributes.properties ? /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.entityData.attributes.properties['life-dates'] ? \"comma\" : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 60\n        }\n      }, this.state.entityData.attributes.properties['life-dates']) : null, this.state.entityData.attributes.properties ? /*#__PURE__*/React.createElement(\"span\", {\n        className: this.state.entityData.attributes.properties.description ? \"comma\" : null,\n        dangerouslySetInnerHTML: {\n          __html: this.state.entityData.attributes.properties.description.charAt(this.state.entityData.attributes.properties.description.length - 1) === '.' ? this.state.entityData.attributes.properties.description.slice(0, -1) : this.state.entityData.attributes.properties.description\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 60\n        }\n      }) : null), this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.links && this.state.entityData.attributes.properties.links.length > 0 ? /*#__PURE__*/React.createElement(\"a\", {\n        href: this.state.entityData.attributes.properties ? this.state.entityData.attributes.properties.links[0] : null,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, \"VIAF\") : null, this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.profile ? /*#__PURE__*/React.createElement(\"button\", {\n        class: \"btn btn-primary\",\n        type: \"button\",\n        \"data-toggle\": \"collapse\",\n        \"data-target\": \"#personProfile\",\n        \"aria-expanded\": \"false\",\n        \"aria-controls\": \"personProfile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }\n      }, \"View Profile\") : null, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"collapse\",\n        id: \"personProfile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }\n      }, this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.profile ? /*#__PURE__*/React.createElement(Col, {\n        md: 9,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 117\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.entityData.attributes.properties.profile\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 129\n        }\n      })) : null, this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.media && this.state.entityData.attributes.properties.media.images ? this.state.entityData.attributes.properties.media.images.map((image, index) => /*#__PURE__*/React.createElement(Col, {\n        md: 3,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.entityData.attributes.properties.media.images.link,\n        alt: 'photo of ' + this.state.entityData.attributes.label,\n        className: \"profile-photo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 19\n        }\n      }))) : null)), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"collapse\",\n        id: \"personProfile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }\n      }, this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.media && this.state.entityData.attributes.properties.media.images ? this.state.entityData.attributes.properties.media.images.map((image, index) => /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: 3,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: image.link,\n        alt: 'photo of ' + this.state.entityData.attributes.label,\n        className: \"profile-photo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 19\n        }\n      })))) : /*#__PURE__*/React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.entityData.attributes.properties.profile\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }\n      }, \"Letters Received:\"), /*#__PURE__*/React.createElement(SearchRecipientOnPage, {\n        tableId: \"receivedlettersList\",\n        placeHolder: \"by date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"table\", {\n        id: \"receivedlettersList\",\n        className: \"table table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        colSpan: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }\n      }, \"Date\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      }, this.state.receivedLetters.length === 0 ? /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 58\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 62\n        }\n      }, \"No Letters\")) : ReceivedLettersList)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"panel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }\n      }, \"Mentioned in:\"), /*#__PURE__*/React.createElement(MentionedLetters, {\n        letters: this.state.entityData.attributes['public-letters-hash'],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      })));\n    }\n  }\n\n}\n\nexport default PersonDetails;","map":{"version":3,"sources":["/Users/mtherri/Documents/Code/beckett-letters/src/components/PersonDetails.js"],"names":["React","Component","Container","Row","Col","DocMetaBuilder","axios","Link","SearchRecipientOnPage","MentionedLetters","PersonDetails","constructor","props","getData","all","get","apiUrl","match","params","id","then","spread","getEntityData","entityData","data","console","log","lettersList","attributes","getReceivedLetters","label","setState","isLoaded","catch","err","error","message","name","receivedLetters","state","componentDidMount","componentDidUpdate","properties","media","images","render","ReceivedLettersList","map","letter","index","metaBuild","title","description","__html","length","entity","key","charAt","slice","links","profile","image","link"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport DocMetaBuilder from './utilities/DocMetaBuilder';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport SearchRecipientOnPage from './utilities/SearchRecipientOnPage';\nimport MentionedLetters from './utilities/MentionedLettersTable';\n\nclass PersonDetails extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      error: '',\n      entityData: [],\n      receivedLetters: [],\n      lettersList: []\n    }\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  getData = () => {\n    axios.all([\n      axios.get(this.props.apiUrl + '/entities/' + this.props.match.params.id)])\n      .then(axios.spread((getEntityData) => {\n        const entityData = getEntityData.data.data;\n        console.log(entityData)\n\n        const lettersList = getEntityData.data.data.attributes['public-letters-hash'];\n        this.getReceivedLetters(getEntityData.data.data.attributes.label)\n        this.setState({ entityData, lettersList });\n        this.setState({ isLoaded: true })\n      }))\n      .catch((err) => {\n        this.setState({ isLoaded: false });\n        this.setState({ error: err.message });\n      });\n  }\n\n  getReceivedLetters = (name) => {\n    if (name !== \" \") {\n      axios.all([\n        axios.get(this.props.apiUrl + '/letters?recipients=' + name)])\n        .then(axios.spread((getReceivedLetters) => {\n          const receivedLetters = getReceivedLetters.data.data;\n          this.setState({ receivedLetters });\n          this.setState({ isLoaded: true })\n        }))\n        .catch((err) => {\n          this.setState({ isLoaded: false });\n          this.setState({ error: err.message });\n        });\n    }\n\n  }\n\n  componentDidUpdate() {\n\n    console.log(this.state.entityData.attributes.properties.media.images)\n  }\n\n\n  render() {\n\n\n    const ReceivedLettersList = this.state.receivedLetters.map((letter, index) =>\n      <tr key={index}>\n        <td>{letter.attributes['formatted-date']}</td>\n        <td><Link to={'/letters/letterdetails/' + letter.id}>Explore Letter</Link></td>\n      </tr>\n    );\n\n    const { error, isLoaded } = this.state;\n    // if there is an error\n    if (error) {\n      return <div>Error: {error.message}</div>;\n      // if not loaded show loading\n    } else if (!isLoaded) {\n      return <Container>Loading...</Container>;\n      // return now that component has value\n    } else {\n      const metaBuild = {\n        title: this.state.entityData.attributes.label,\n        description: `View details for ${this.state.entityData.attributes.label}`,\n        id: this.state.entityData.id\n      };\n      return (\n        <div className=\"details\">\n          <DocMetaBuilder {...metaBuild} />\n          <h1>\n            <span dangerouslySetInnerHTML={{ __html: this.state.entityData.attributes.properties ? this.state.entityData.attributes.properties['last-name'] : null }} />\n            <span dangerouslySetInnerHTML={{ __html: this.state.entityData.attributes.properties ? this.state.entityData.attributes.properties['first-name'] : null }} className={this.state.entityData.attributes.properties['first-name'] ? 'comma' : null} />\n            {this.state.entityData.attributes.properties && this.state.entityData.attributes.properties['alternate-names-spellings'].length > 0 ? <span className='spellings'>{this.state.entityData.attributes.properties['alternate-names-spellings'].map((entity, key) => <span key={key} dangerouslySetInnerHTML={{ __html: entity }} className=\"list-span\"></span>)} </span> : null}\n            {this.state.entityData.attributes.properties ? <span className={this.state.entityData.attributes.properties['life-dates'] ? \"comma\" : null}>{this.state.entityData.attributes.properties['life-dates']}</span> : null}\n            {this.state.entityData.attributes.properties ? <span className={this.state.entityData.attributes.properties.description ? \"comma\" : null} dangerouslySetInnerHTML={{ __html: this.state.entityData.attributes.properties.description.charAt(this.state.entityData.attributes.properties.description.length - 1) === '.' ? this.state.entityData.attributes.properties.description.slice(0, -1) : this.state.entityData.attributes.properties.description }} /> : null}\n          </h1>\n          {this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.links && this.state.entityData.attributes.properties.links.length > 0 ?\n            <a href={this.state.entityData.attributes.properties ? this.state.entityData.attributes.properties.links[0] : null} target=\"_blank\" rel=\"noopener noreferrer\" className=\"btn btn-primary\">VIAF</a>\n            : null}\n          {this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.profile ?\n            <button class=\"btn btn-primary\" type=\"button\" data-toggle=\"collapse\" data-target=\"#personProfile\" aria-expanded=\"false\" aria-controls=\"personProfile\">\n              View Profile\n            </button>\n            : null}\n          <Row>\n            <div class=\"collapse\" id=\"personProfile\">\n              {this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.profile ? <Col md={9}><div dangerouslySetInnerHTML={{ __html: this.state.entityData.attributes.properties.profile }} /></Col> : null}\n              {this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.media && this.state.entityData.attributes.properties.media.images ? this.state.entityData.attributes.properties.media.images.map((image, index) =>\n                <Col md={3}>\n                  <img src={this.state.entityData.attributes.properties.media.images.link} alt={'photo of ' + this.state.entityData.attributes.label} className=\"profile-photo\" />\n                </Col>\n              ) : null}\n            </div>\n          </Row>\n\n          <div class=\"collapse\" id=\"personProfile\">\n            {this.state.entityData.attributes.properties && this.state.entityData.attributes.properties.media && this.state.entityData.attributes.properties.media.images ? this.state.entityData.attributes.properties.media.images.map((image, index) =>\n              <Row>\n                <Col md={3}>\n                  <img src={image.link} alt={'photo of ' + this.state.entityData.attributes.label} className=\"profile-photo\" />\n                </Col></Row>\n            ) : <div dangerouslySetInnerHTML={{ __html: this.state.entityData.attributes.properties.profile }} />}\n          </div>\n\n          <h2>Letters Received:</h2>\n          <SearchRecipientOnPage tableId='receivedlettersList' placeHolder='by date' />\n          <table id=\"receivedlettersList\" className=\"table table-bordered\">\n            <thead>\n              <tr>\n                <th colSpan=\"2\">Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.receivedLetters.length === 0 ? <tr><td>No Letters</td></tr> : ReceivedLettersList}\n\n            </tbody>\n          </table>\n          <div className=\"panel\">\n            <h2>Mentioned in:</h2>\n            <MentionedLetters letters={this.state.entityData.attributes['public-letters-hash']} />\n          </div>\n\n        </div>\n      )\n    }\n  }\n}\n\nexport default PersonDetails;\n"]},"metadata":{},"sourceType":"module"}